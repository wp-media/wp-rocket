<?php

return [
	'test_data' => [
		'testShouldDoNothingWhenBypass' => [
			'config' => [
				'options' => [
					'embeds' => 1,
				],
				'bypass' => true,
			],
			'rules'  => [
                '^wp-json/?$' => 'index.php?rest_route=/',
                '^wp-json/(.*)?' => 'index.php?rest_route=/$matches[1]',
                'robots\\.txt$' => 'index.php?robots=1',
                'favicon\\.ico$' => 'index.php?favicon=1',
                '.*wp-register.php$' => 'index.php?register=true',
                'feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?&feed=$matches[1]',
                'embed/?$' => 'index.php?&embed=true',
                'page/?([0-9]{1,})/?$' => 'index.php?&paged=$matches[1]',
                '(.?.+?)/embed/?$' => 'index.php?pagename=$matches[1]&embed=true',
                '(.?.+?)/trackback/?$' => 'index.php?pagename=$matches[1]&tb=1',
                '(.?.+?)/feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&paged=$matches[2]',
                '(.?.+?)/comment-page-([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&cpage=$matches[2]',
                '([^/]+)/embed/?$' => 'index.php?name=$matches[1]&embed=true',
			],
			'expected' => [
                '^wp-json/?$' => 'index.php?rest_route=/',
                '^wp-json/(.*)?' => 'index.php?rest_route=/$matches[1]',
                'robots\\.txt$' => 'index.php?robots=1',
                'favicon\\.ico$' => 'index.php?favicon=1',
                '.*wp-register.php$' => 'index.php?register=true',
                'feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?&feed=$matches[1]',
                'embed/?$' => 'index.php?&embed=true',
                'page/?([0-9]{1,})/?$' => 'index.php?&paged=$matches[1]',
                '(.?.+?)/embed/?$' => 'index.php?pagename=$matches[1]&embed=true',
                '(.?.+?)/trackback/?$' => 'index.php?pagename=$matches[1]&tb=1',
                '(.?.+?)/feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&paged=$matches[2]',
                '(.?.+?)/comment-page-([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&cpage=$matches[2]',
                '([^/]+)/embed/?$' => 'index.php?name=$matches[1]&embed=true',
			],
		],
		'testShouldDoNothingWhenOptionDisabled' => [
			'config' => [
				'options' => [
					'embeds' => 0,
				],
				'bypass' => false,
			],
			'plugins'  => [
                '^wp-json/?$' => 'index.php?rest_route=/',
                '^wp-json/(.*)?' => 'index.php?rest_route=/$matches[1]',
                'robots\\.txt$' => 'index.php?robots=1',
                'favicon\\.ico$' => 'index.php?favicon=1',
                '.*wp-register.php$' => 'index.php?register=true',
                'feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?&feed=$matches[1]',
                'embed/?$' => 'index.php?&embed=true',
                'page/?([0-9]{1,})/?$' => 'index.php?&paged=$matches[1]',
                '(.?.+?)/embed/?$' => 'index.php?pagename=$matches[1]&embed=true',
                '(.?.+?)/trackback/?$' => 'index.php?pagename=$matches[1]&tb=1',
                '(.?.+?)/feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&paged=$matches[2]',
                '(.?.+?)/comment-page-([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&cpage=$matches[2]',
                '([^/]+)/embed/?$' => 'index.php?name=$matches[1]&embed=true',
			],
			'expected' => [
                '^wp-json/?$' => 'index.php?rest_route=/',
                '^wp-json/(.*)?' => 'index.php?rest_route=/$matches[1]',
                'robots\\.txt$' => 'index.php?robots=1',
                'favicon\\.ico$' => 'index.php?favicon=1',
                '.*wp-register.php$' => 'index.php?register=true',
                'feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?&feed=$matches[1]',
                'embed/?$' => 'index.php?&embed=true',
                'page/?([0-9]{1,})/?$' => 'index.php?&paged=$matches[1]',
                '(.?.+?)/embed/?$' => 'index.php?pagename=$matches[1]&embed=true',
                '(.?.+?)/trackback/?$' => 'index.php?pagename=$matches[1]&tb=1',
                '(.?.+?)/feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&paged=$matches[2]',
                '(.?.+?)/comment-page-([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&cpage=$matches[2]',
                '([^/]+)/embed/?$' => 'index.php?name=$matches[1]&embed=true',
			],
		],
		'testShouldReturnEmptyArrayWhenEmptyArray' => [
			'config' => [
				'options' => [
					'embeds' => 1,
				],
				'bypass' => false,
			],
			'plugins'  => [],
			'expected' => [],
		],
		'testShouldReturnRulesWithoutEmbeds' => [
			'config' => [
				'options' => [
					'embeds' => 1,
				],
				'bypass' => false,
			],
			'plugins'  => [
                '^wp-json/?$' => 'index.php?rest_route=/',
                '^wp-json/(.*)?' => 'index.php?rest_route=/$matches[1]',
                'robots\\.txt$' => 'index.php?robots=1',
                'favicon\\.ico$' => 'index.php?favicon=1',
                '.*wp-register.php$' => 'index.php?register=true',
                'feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?&feed=$matches[1]',
                'embed/?$' => 'index.php?&embed=true',
                'page/?([0-9]{1,})/?$' => 'index.php?&paged=$matches[1]',
                '(.?.+?)/embed/?$' => 'index.php?pagename=$matches[1]&embed=true',
                '(.?.+?)/trackback/?$' => 'index.php?pagename=$matches[1]&tb=1',
                '(.?.+?)/feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&paged=$matches[2]',
                '(.?.+?)/comment-page-([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&cpage=$matches[2]',
                '([^/]+)/embed/?$' => 'index.php?name=$matches[1]&embed=true',
			],
			'expected' => [
                '^wp-json/?$' => 'index.php?rest_route=/',
                '^wp-json/(.*)?' => 'index.php?rest_route=/$matches[1]',
                'robots\\.txt$' => 'index.php?robots=1',
                'favicon\\.ico$' => 'index.php?favicon=1',
                '.*wp-register.php$' => 'index.php?register=true',
                'feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?&feed=$matches[1]',
                'page/?([0-9]{1,})/?$' => 'index.php?&paged=$matches[1]',
                '(.?.+?)/trackback/?$' => 'index.php?pagename=$matches[1]&tb=1',
                '(.?.+?)/feed/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/(feed|rdf|rss|rss2|atom)/?$' => 'index.php?pagename=$matches[1]&feed=$matches[2]',
                '(.?.+?)/page/?([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&paged=$matches[2]',
                '(.?.+?)/comment-page-([0-9]{1,})/?$' => 'index.php?pagename=$matches[1]&cpage=$matches[2]',
			],
		],
	],
];

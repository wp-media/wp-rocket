!function o(r,i,a){function c(t,e){if(!i[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},r[t][0].call(n.exports,function(e){return c(r[t][1][e]||e)},n,n.exports,o,r,i,a)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,t,n){"use strict";function u(r){const e=document.querySelectorAll("img, video, p, main, div"),i=[];return e.forEach(t=>{var e=t.getBoundingClientRect();if(0<e.width&&0<e.height&&0<=e.top&&e.bottom<=window.innerHeight&&0<=e.left&&e.right<=window.innerWidth){var n=e.width*e.height,o=function(e){if("IMG"===e.tagName)return e.src;const t=window.getComputedStyle(e).getPropertyValue("background-image");if(t&&"none"!==t)return t.replace(/^url\(['"](.+)['"]\)$/,"$1");return null}(t);if(null!==o){for(let e=0;e<i.length;e++)if(n>i[e].area){i.splice(e,0,{element:t,area:n,imageURL:o}),i.length=Math.min(r,i.length);break}i.length<r&&i.push({element:t,area:n,imageURL:o})}}}),i.map(e=>({element:e.element,imageURL:e.imageURL}))}let s=[];async function o(){const e=u(1);0!==e.length?(console.log("Estimated LCP element:",e),s=e.map(e=>({src:e.imageURL,label:"lcp"}))):console.log("No LCP candidate found.");for(var t=document.querySelectorAll("img"),n=0;n<t.length;n++){var o=t[n],r=o.getBoundingClientRect();if(r.top<(window.innerHeight||document.documentElement.clientHeight)&&r.left<(window.innerWidth||document.documentElement.clientWidth)&&0<r.bottom&&0<r.right){for(var i=o.parentNode;i!==document;){var a=window.getComputedStyle(i).display,c=window.getComputedStyle(i).visibility;if("none"===a||"hidden"===c)break;i=i.parentNode}s.some(e=>e.src===o.src)||i!==document||s.push({src:o.src,label:"above-the-fold"})}}console.log(s);var l=JSON.stringify(s);window.performance_images_json=l,console.log(l);const d=new FormData;d.append("action","rocket_lcp"),d.append("rocket_lcp_nonce",rocket_lcp_data.nonce),d.append("url",rocket_lcp_data.url),d.append("is_mobile",rocket_lcp_data.is_mobile),d.append("images",l),d.append("status","success"),await fetch(rocket_lcp_data.ajax_url,{method:"POST",credentials:"same-origin",body:d,headers:{"wpr-saas-no-intercept":!0}}).then(e=>e.json()).then(e=>{const t=document.querySelector('[data-name="wpr-lcp-beacon"]');t.setAttribute("beacon-completed","true"),console.log(e)}).catch(e=>{console.error(e)})}"loading"!==document.readyState?(console.time("extract"),setTimeout(o,500),console.timeEnd("extract")):document.addEventListener("DOMContentLoaded",async function(){console.time("extract"),setTimeout(o,500),console.timeEnd("extract")})},{}]},{},[1]);
//# sourceMappingURL=lcp-beacon.js.map
